<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, user-scalable=no"/>
    <meta name="renderer" content="webkit"/>
    <meta name="theme-color" content="#ffffff"/>
    <link rel="manifest" href="/manifest.json"/>
    <link href="/static/asciidoctor.min.css" rel="stylesheet"/>
    <link href="/static/build.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism.min.css" integrity="sha256-77qGXu2p8NpfcBpTjw4jsMeQnz0vyh74f5do0cWjQ/Q=" crossorigin="anonymous" />
</head>
<body>
<div id='app'>
    <header class="header">
        <div class="container">
            <!--start: Navigation -->
            <a href="/" class="brand">On the Road</a>
<!--            <ul class="nav">-->
<!--                <li><a href="/list/">Blogs</a></li>-->
<!--                <li><a href="/slides/">Slides</a></li>-->
<!--                <li><a href="/about/">About</a></li>-->
<!--            </ul>-->
        </div>
        <!--end: Navigation -->
        <div style="clear: both"></div>
        <search-bar v-if="isPageList"></search-bar>
    </header>

<section class="post-view">
    <article>
     
         <h1 class="post-title">             终端界面下乱码的解决         </h1>
     
     <p>大家都知道乱码就是字符集设置问题，所以我们需要清楚关于字符集的几个概念。</p>
<ul>
<li><strong>GB2312</strong>：早期的中文字符集国标，字库很小，不建议使用。</li>
<li><strong>GBK</strong>：微软为弥补gb2312的不足搞出来的大字符集，是gb2312的超集，也是windows默认的字符集，几乎是事实标准。</li>
<li><strong>GB18030</strong>：大字符集的国标，比GBK多一些字，但在编码定义上与GBK有少许不同，一般可以认为他们是兼容的。</li>
<li><strong>IBM-eucCN</strong>：IBM的中文字符集，AIX默认，与GBK基本兼容，但字要少一点。</li>
<li><strong>UTF8</strong>：最全的字符集，用这个任何生僻字都可以处理，推荐使用。</li>
<li><strong>CP936</strong>：Code Page 936，windows内中文语言的代码页，早期被映射到gb2312，现在被映射到gbk。</li>
</ul>
<p>下面我们以编辑一个utf8文件为例，说明跟字符集设置相关的因素。 要处理utf8文件，那么在读写的所有环节我们都应该使用utf8，避免程序自动转码出现乱码。</p>
<ol>
<li>
<p>设置当前环境字符集为UTF8</p>
<p>首先使用<code>locale charmap</code>命令检查当前字符集。如果不是utf8则用<code>locale -a</code>列出系统当前可用字符集，找到包含utf8的那一项，例如ZH_CN.UTF-8，然后<code>export LANG=ZH_CN.UTF-8</code> 修改LANG的环境（注意区分大小写），然后用<code>locale charmap</code>命令再次检查，多数情况下这样就ok了。 如果字符集没有改过来或变成了其他的，使用locale命令检查详细的语言设置，这时会发现LC_ 开头的一些环境变量不是utf8，手工unset或export为utf8.</p>
</li>
<li>
<p>设置终端软件的字符集</p>
<p>a) <strong>Putty</strong>： window → Translation → Remote character set 改为 UTF-8，也可以保存在session里面。</p>
<p>b) <strong>Xshell</strong>：Terminal → Translation → Encoding 改为 UTF-8，也可以通过工具栏上的 Encoding 图标快速切换， 推荐大家使用xshell作为终端。</p>
<p>c) <strong>SecureCRT</strong>：Terminal → Appearance → character encoding 改为UTF-8. 这时我们已经可以通过cat查看utf8文件或者通过 cat &gt; testfile 写入utf8数据到文件里面。 但如果通过vim编辑，还需要修改vim的环境变量。</p>
</li>
<li>
<p>VIM的设置</p>
<p><code>vim ~/.vimrc</code> ,设置 <code>set fileencodings=utf-8</code> (指定vim以utf8编码打开文件) 和 <code>set encoding=utf-8</code> (指定vim以utf8编码输出到终端)</p>
</li>
</ol>
<p>这样我们就可以使用vim编辑utf8文件了，其他字符集也与这类似。但是每次修改这些比较麻烦，如果不包含生僻字，我们可以用<code>iconv -f UTF-8 -t GB18030 filename</code> 将utf8文件转换成gb18030处理。</p>
<p><strong>注意</strong>：</p>
<p>1、iconv并不依赖操作系统的字符集，iconv能支持的字符集可以通过<code>iconv -l</code>命令查看。</p>
<p>2、java程序也不依赖操作系统的字符集，jvm能支持的字符集可通过Charset.availableCharsets()方法查看。</p>

    </article>
    <section class="comment">
        <div id="disqus_thread"></div>
    </section>
</section>
<footer class="footer">
    Copyright © 2020 | Powered by <a href="https://github.com/chenhm/java-static-blog" target="_blank">java-static-blog</a>
</footer>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-core.min.js" integrity="sha256-Y+Budm2wBEjYjbH0qcJRmLuRBFpXd0VKxl6XhdS4hgA=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-ht8ay6ZTPZfuixYB99I5oRpCLsCq7Do2LjEYLwbe+X8=" crossorigin="anonymous"></script>
</body>
</html>